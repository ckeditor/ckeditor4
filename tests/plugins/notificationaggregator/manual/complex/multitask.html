<div>
	<textarea cols="80" id="editor1" name="editor1" rows="10">
		&lt;p&gt;&lt;strong&gt;Apollo 11&lt;/strong&gt; was the spaceflight that landed the first humans, Americans Neil Armstrong and Buzz Aldrin, on the Moon on July 20, 1969, at 20:18 UTC. Armstrong became the first to step onto the lunar surface 6 hours later on July 21 at 02:56 UTC.&lt;/p&gt;&lt;p&gt;Armstrong spent about three and a half two and a half hours outside the spacecraft, Aldrin slightly less; and together they collected&lt;/p&gt;
	</textarea>
	<script>
		var editor = CKEDITOR.replace( 'editor1', {
				extraPlugins: 'notificationaggregator',
				toolbar: [ [ 'Undo', 'Redo' ], [ 'Bold', 'Italic', 'Underline' ] ]
			} );

		function createAggregator() {
			// Init notification aggregator.
			var aggregator = new CKEDITOR.plugins.notificationAggregator( editor, 'Loading {current} of {max}... {percentage}%' ),
				// Create 2 tasks.
				tasks = [
					aggregator.createTask( { weight: 10 } ),
					aggregator.createTask( { weight: 40 } )
				];


			var newWeight = 0,
				timer = window.setInterval( function() {

					newWeight += 1;
					if ( newWeight <= 10 ) {
						// Until newWeight will not be bigger than 10 it will add to first task.
						tasks[ 0 ].update( newWeight );
					} else {
						// Then we update only second task.
						tasks[ 1 ].update( newWeight - 10 );
					}

					if ( aggregator._tasks.length === 1  ) {
						foo = 1;
					}

					// When aggregator is finished remove the interval timer.
					if ( aggregator.isFinished() ) {
						window.clearInterval( timer );
					}
				}, 100 );
		}
	</script>
	<p>
		<input onclick="createAggregator();" type="button" value="Init aggregator">
	</p>
</div>